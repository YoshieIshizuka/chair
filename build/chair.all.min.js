/*! chair 2013-04-25 */
var AjaxDataSource,ArrayDataSource,Column,ColumnFormat,DomainEvent,Grid,GridRowAppended,Row,Table,__indexOf=[].indexOf||function(t){for(var n=0,r=this.length;r>n;n++)if(n in this&&this[n]===t)return n;return-1};Column=function(){function t(t,n,r){null==r&&(r=[]),this.id=t,this.name=n,this.formats=r}return t.prototype.format=function(t){var n,r,i,o;for(t=this.escapeHTML(t),o=this.formats,r=0,i=o.length;i>r;r++)n=o[r],t=n.format(t);return t},t.prototype.escapeHTML=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},t}(),ColumnFormat=function(){function t(t){this.formatter=t}return t.prototype.format=function(t){return this.formatter(t)},t}(),DomainEvent={channels:[],publish:function(t,n){var r,i,o,e,s;for(void 0===this.channels[t]&&(this.channels[t]=[]),e=this.channels[t],s=[],i=0,o=e.length;o>i;i++)r=e[i],s.push(r(n.serialize(),t));return s},subscribe:function(t,n){return void 0===this.channels[t]&&(this.channels[t]=[]),this.channels[t].push(n)}},Grid=function(){function t(t,n){var r,i,o;for(this.id=t,this.rows=[],this.rowIds=[],this.columns=[],i=0,o=n.length;o>i;i++)r=n[i],this.columns.push(r)}return t.prototype.append=function(t){var n;if(n=t.id,__indexOf.call(this.rowIds,n)>=0)throw Error("Row(id:"+t.id+") already exists in the Grid(id:"+this.id+")");return this.rowIds.push(t.id),this.rows.push(t),DomainEvent.publish("GridRowAppended",new GridRowAppended(this.id,t.id,t.columns))},t}(),GridRowAppended=function(){function t(t,n,r){var i,o;this.gridId=t,this.rowId=n,this.columns=[];for(i in r)o=r[i],this.columns.push(o)}return t.prototype.serialize=function(){return{gridId:this.gridId,rowId:this.rowId,columns:this.columns}},t}(),Row=function(){function t(t,n){var r,i;this.id=t,this.columns={};for(r in n)i=n[r],this.columns[r]=""+i}return t}(),Table=function(){function t(t){this.table=t,this.rows={},this.rowsById={},this.numberOfRows=0}return t.prototype.header=function(t){var n,r,i,o,e,s;for(this.columns=t,r=$("<tr></tr>"),e=this.columns,s=[],i=0,o=e.length;o>i;i++)n=e[i],r.append($("<th></th>").append($("<span></span>").append(n))),s.push(this.table.find("thead").append(r));return s},t.prototype.get=function(t){return this.rows[t]},t.prototype.getById=function(t){return this.rowsById[t]},t.prototype.removeById=function(t){var n;return this.findRow(t).remove,n=this.getById(t),delete this.rowsById[t],n},t.prototype.updateById=function(t,n){var r,i,o,e,s,u;for(i=$("<tr></tr>").attr("data-id",t),o=$(this.table).find("tr[data-id="+t+"]"),this.getById(t=n),r=0,s=0,u=n.length;u>s;s++)e=n[s],i.append(this.createRowColumn(this.columns[r],e)),r++;return o.html(i.html())},t.prototype.insert=function(t,n){var r,i,o,e,s;for(void 0===n&&(n=this.guid()),i=$("<tr></tr>").attr("data-id",n),this.rows[this.numberOfRows++]=t,this.rowsById[n]=t,r=0,e=0,s=t.length;s>e;e++)o=t[e],i.append(this.createRowColumn(this.columns[r],o)),r++;return this.table.find("tbody").append(i)},t.prototype.createRowColumn=function(t,n){return $("<td></td>").addClass(t).append($("<span></span>").append(n))},t.prototype.addClassToRow=function(t,n){var r;return r=this.findRow(t),r.hasClass(n)?void 0:r.addClass(n)},t.prototype.removeAllClassesFromRow=function(t){var n;return n=this.findRow(t),n.removeClass()},t.prototype.toggleClassToRow=function(t,n){return this.findRow(t).toggleClass(n)},t.prototype.findRow=function(t){return $(this.table).find("tr[data-id="+t+"]")},t.prototype.listen=function(t,n,r){return this.findRow(t).on(n,function(){return r(t,$(this))})},t.prototype.listenRowEvent=function(t,n){return this.table.on(t,"tr",function(){var t;return t=$(this).attr("data-id"),n(t,$(this))})},t.prototype.listenTextEvent=function(t,n){return this.table.find("span").on(t,function(){var t;return t=$(this).parents("tr").attr("data-id"),n(t,$(this)),!1})},t.prototype.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},t.prototype.guid=function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()},t}(),AjaxDataSource=function(){function t(t){this.url=t}return t.prototype.retrieve=function(t,n){return $.get(this.url,n,function(n){return t(n)})},t}(),ArrayDataSource=function(){function t(){}return t.prototype.retrieve=function(t){return t([["suin",26],["reoring",300],["nouphet",3e5]])},t}();